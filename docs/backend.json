
{
  "entities": {
    "Patient": {
      "title": "Patient",
      "description": "Represents a patient in the system.",
      "type": "object",
      "properties": {
        "patient_id": {
          "type": "string",
          "description": "Unique identifier for the patient."
        },
        "name": {
          "type": "string",
          "description": "Patient's full name."
        },
        "age": {
          "type": "number",
          "description": "Patient's age."
        },
        "condition": {
          "type": "string",
          "description": "Primary medical condition of the patient."
        },
        "contact_info": {
          "type": "string",
          "description": "Patient's contact information (email or phone)."
        },
        "assigned_doctor_id": {
          "type": "string",
          "description": "ID of the doctor assigned to the patient."
        },
        "caregiver_contact": {
          "type": "string",
          "description": "Contact information for the patient's caregiver (optional)."
        }
      },
      "required": [
        "patient_id",
        "name",
        "age",
        "condition",
        "assigned_doctor_id"
      ]
    },
    "MedicineSchedule": {
      "title": "Medicine Schedule",
      "description": "Defines the medication schedule for a patient.",
      "type": "object",
      "properties": {
        "schedule_id": {
          "type": "string",
          "description": "Unique identifier for the schedule entry."
        },
        "patient_id": {
          "type": "string",
          "description": "ID of the patient this schedule belongs to."
        },
        "medicine_name": {
          "type": "string",
          "description": "Name of the medicine."
        },
        "dose_time": {
          "type": "string",
          "format": "date-time",
          "description": "Scheduled time for the dose."
        },
        "dose_quantity": {
          "type": "string",
          "description": "Quantity and unit of the dose (e.g., '50mg')."
        },
        "status": {
          "type": "string",
          "enum": [
            "taken",
            "missed",
            "late"
          ],
          "description": "Current status of the scheduled dose."
        }
      },
      "required": [
        "schedule_id",
        "patient_id",
        "medicine_name",
        "dose_time",
        "status"
      ]
    },
    "DoctorAlert": {
      "title": "Doctor Alert",
      "description": "Represents an AI-generated alert for a doctor.",
      "type": "object",
      "properties": {
        "alert_id": {
          "type": "string",
          "description": "Unique identifier for the alert."
        },
        "patient_id": {
          "type": "string",
          "description": "ID of the patient the alert is for."
        },
        "alert_type": {
          "type": "string",
          "enum": [
            "missed dose",
            "high risk"
          ],
          "description": "The type of alert."
        },
        "risk_percentage": {
          "type": "number",
          "description": "The AI-calculated risk percentage."
        },
        "timestamp_alerted": {
          "type": "string",
          "format": "date-time",
          "description": "When the alert was generated."
        }
      },
      "required": [
        "alert_id",
        "patient_id",
        "alert_type"
      ]
    },
    "User": {
      "title": "User",
      "description": "A user of the application.",
      "type": "object",
      "properties": {
        "id": { "type": "string", "description": "Unique user ID." },
        "name": { "type": "string", "description": "Full name." },
        "role": { "type": "string", "enum": ["patient", "doctor", "admin"], "description": "User role." },
        "email": { "type": "string", "format": "email" },
        "phone": { "type": "string" },
        "specialty": { "type": "string", "description": "Doctor's specialty (if applicable)." }
      },
      "required": ["id", "name", "role", "email"]
    },
    "Chat": {
      "title": "Chat",
      "description": "A chat thread between a patient and a doctor.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "patientId": { "type": "string" },
        "doctorId": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" },
        "lastMessage": { "type": "string" },
        "lastMessageAt": { "type": "string", "format": "date-time" },
        "unreadCount": { "type": "number", "minimum": 0 },
        "status": { "type": "string", "enum": ["active", "archived"] }
      },
      "required": ["id", "patientId", "doctorId", "createdAt", "lastMessageAt"]
    },
    "ChatMessage": {
      "title": "Chat Message",
      "description": "A single message within a chat thread.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "chatId": { "type": "string" },
        "senderId": { "type": "string" },
        "senderRole": { "type": "string", "enum": ["patient", "doctor", "system"] },
        "text": { "type": "string" },
        "type": { "type": "string", "enum": ["text", "image", "system", "call_request"] },
        "createdAt": { "type": "string", "format": "date-time" },
        "deliveredAt": { "type": "string", "format": "date-time" },
        "seenAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "chatId", "senderId", "senderRole", "text", "type", "createdAt"]
    },
    "CallSession": {
      "title": "Call Session",
      "description": "Metadata for a WebRTC video call session.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "chatId": { "type": "string" },
        "initiatorId": { "type": "string" },
        "receiverId": { "type": "string" },
        "status": { "type": "string", "enum": ["ringing", "connected", "ended", "failed"] },
        "createdAt": { "type": "string", "format": "date-time" },
        "webrtcOffer": { "type": "string" },
        "webrtcAnswer": { "type": "string" }
      },
      "required": ["id", "chatId", "initiatorId", "receiverId", "status", "createdAt"]
    },
    "Rating": {
      "title": "Rating",
      "description": "A rating given by a patient to a doctor.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "chatId": { "type": "string" },
        "doctorId": { "type": "string" },
        "patientId": { "type": "string" },
        "rating": { "type": "number", "minimum": 1, "maximum": 5 },
        "comment": { "type": "string" },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "chatId", "doctorId", "patientId", "rating", "createdAt"]
    },
    "Complaint": {
      "title": "Complaint",
      "description": "A complaint filed by a patient.",
      "type": "object",
      "properties": {
        "id": { "type": "string" },
        "chatId": { "type": "string" },
        "patientId": { "type": "string" },
        "doctorId": { "type": "string" },
        "category": { "type": "string" },
        "text": { "type": "string" },
        "status": { "type": "string", "enum": ["received", "under_review", "escalated", "resolved", "rejected"] },
        "createdAt": { "type": "string", "format": "date-time" }
      },
      "required": ["id", "chatId", "patientId", "doctorId", "category", "text", "status", "createdAt"]
    }
  },
  "auth": {
    "providers": []
  },
  "firestore": {
    "/patients/{patientId}": {
      "schema": { "$ref": "#/entities/Patient" },
      "description": "Stores individual patient profiles."
    },
    "/medicineSchedules/{scheduleId}": {
      "schema": { "$ref": "#/entities/MedicineSchedule" },
      "description": "Stores all medication schedules for all patients."
    },
    "/doctorAlerts/{alertId}": {
      "schema": { "$ref": "#/entities/DoctorAlert" },
      "description": "Stores AI-generated alerts for doctors."
    },
    "/users/{userId}": {
      "schema": { "$ref": "#/entities/User" },
      "description": "Stores user profiles for patients, doctors, and admins."
    },
    "/chats/{chatId}": {
      "schema": { "$ref": "#/entities/Chat" },
      "description": "Stores metadata for each chat thread."
    },
    "/chats/{chatId}/messages/{messageId}": {
      "schema": { "$ref": "#/entities/ChatMessage" },
      "description": "Stores all messages for a given chat thread."
    },
    "/call_sessions/{sessionId}": {
      "schema": { "$ref": "#/entities/CallSession" },
      "description": "Manages WebRTC signaling and session state for video calls."
    },
    "/ratings/{ratingId}": {
      "schema": { "$ref": "#/entities/Rating" },
      "description": "Stores patient ratings for doctors."
    },
    "/complaints/{complaintId}": {
      "schema": { "$ref": "#/entities/Complaint" },
      "description": "Stores patient complaints for audit and review."
    },
    "/notifications/{notifId}": {
      "schema": { "$ref": "#/entities/Notification" },
      "description": "Stores system-generated notifications for admins or doctors."
    }
  }
}
